---
title: "Philosophy and models of the Ocean Health Index"
output: html_document
---

Work together to answer these questions.  

All the information you need should be in the OHI Methods [document](https://raw.githack.com/OHI-Science/ohi-global/published/documents/methods/Supplement.html#2_the_theory_of_ohi).

I will be around to answer any questions...so don't hesitate to get clarification, extra guidance, or request hints!

### OHI score models and data
1. What is the difference between a goal's "status" and "score"?

ANSWER: A goal's status is used to calculate its score. Goal scores are calculated as the average of current status and likely future status.

<br>
<br>

2. If a region's food provision goal has the following values, what would its food provision score be?

Predicted future status: 80

Current status: 60

```{r}

# Calculate FP goal score by averaging current status and predicted future status
FP_score <- mean(c(80, 60))
FP_score #70

```

ANSWER: Its food provision score would be 70.

<br>
<br>

3. Given the following data, what would this region's Index score be?

Goal/subgoal  | Abbreviation   | Score
------------- | -------------- | -------------
Artisanal Fishing Opportunity | AO | 90
Habitat | HAB | 50
Species Condition | SPP | 30
Carbon Storage | CS | 20
Clean Waters | CW | 95
Coastal Livelihoods and Economies | LE | 60
Coastal Protection | CP | 80
Food Provision | FP | 85
Natural Products | NP | 100
Sense of Place | SP | 10
Tourism and Recreation | TR | 50


NOTE: The abbreviations for subgoals have 3 letters and goals have 2 letters.

```{r}

# Average the subgoal scores for Biodiversity goal (HAB and SPP)
BD_score <- mean(c(50, 30))
BD_score # 40

# Average all goal scores
Index_score <- mean(c(90, 40, 20, 95, 60, 80, 85, 100, 10, 50))
Index_score # 63

```

ANSWER: This region's Index score is 63.

<br>
<br>

4. Fill in the missing values.  

NOTE: Pressure and resilience must be multiplied by 0.01.  Trend and status are not modified.  I think we should probably change the way report trend (or, alternatively, pressures/resilience) so they are treated consistently.


Dimension | Scenario 1 | Scenario 2
---------- | ---------- | ---------
Score      | **71.33**  | **77.5**
Current status |  75 | 75
Predicted future status | **67.65** |  80
Trend | 0.10 | 0.10
Pressure | 100 | 50
Resilience | 50 | 50


QUESTION: How did a pressure change from 100 to 50 affect the final score?  Was this a larger or smaller effect than you would have expected?

```{r}

# Multiply pressure and resilience by 0.01
pres_1 <- 100*0.01
res_1 <- 50*0.01
pres_2 <- 50*0.01
res_2 <- 50*0.01

# Assign other variables
cur_status_1 <- 75
cur_status_2 <- 75
fut_status_2 <- 80
trend_1 <- 0.1
trend_2 <- 0.1

# Calculate predicted future status for Scenario 1
fut_status_1 <- (1 + 0.67*trend_1 + (1-0.67)*(res_1-pres_1))*cur_status_1
fut_status_1 # 67.65

# Calculate scores for both scenarios
score_1 <- mean(c(cur_status_1, fut_status_1))
score_1 #71.325

score_2 <- mean(c(cur_status_2, fut_status_2))
score_2 #77.5

```

ANSWER: A pressure change from 100 to 50 caused the final score to increase by approximately 6 points, from 71.33 to 77.5. This was a smaller effect than I would have expected, as the pressure was cut in half, but after seeing the equation of how pressure is factored into the overall score, I can see why it had this effect.

<br>
<br>


### Humans as part of the ecosystem
<br>
5. To calculate the Fishery subgoal, we:

a. Obtain B/Bmsy  scores for each stock that is harvested.   B/Bmsy is defined as: the ratio of observed biomass to the biomass that would provide maximum sustainable yield. When B/BMSY = 1, then biomass equals BMSY. If B/BMSY falls below 1, biomass is too low to provide maximum sustainable yield. For example, if B/BMSY = 0.5, then biomass is only 50% of that needed for maximum sustainable yield. (from: http://www.catchshareindicators.org/wp-content/uploads/2013/12/NE_Biomass_Feb-2014.pdf)

b. Convert B/Bmsy into a stock status score that ranges from 0-1, with one reflecting a perfect score.  The relationship between B/Bmsy values and stock status scores looks like this:

![](figures/fis_bbmsy_2_score.jpg)

c. Take some sort of average of the stock status scores within each region (for the global we use a geometric mean weighted by catch).

QUESTION: B/Bmsy scores greater than 1 indicate the stock is doing well!  Given this, why are B/Bmsy scores > 1.05 penalized (i.e., stock status score is less than 1)? 

ANSWER: B/Bmsy scores greater than 1 are penalized because that means the stock is being under-harvested, and so is not reaching maximum sustainable yield and providing the greatest benefit possible to people. However, the penalty for under-harvested stocks is half of that for over-harvested stocks, as it is much easier to improve the goal score when stocks are under-harvested (i.e., increase fishing pressure) than it is when populations are over-harvested and need to be rebuilt.

<br>
<br>

### Gapfilling
6. Imagine you are calculating OHI scores for 10 regions.  The data you can find for an economic variable that is used to calculate the status of one of the goals looks like this:

rgn_id   | data
-------- | -------
1        | 72
2        | 74
3        | 80
4        | 70
5        | NA
6        | NA
7        | 71
8        | 75
9        | 76
10       | 76

QUESTION: Should the missing values (NA is a missing value in R) remain missing?  If so, why?

Or, should you try to estimate the missing values?  If so, how might you go about estimating them?

ANSWER: The NA values should not remain missing; instead, we should try to estimate the missing values through gapfilling, which is a critical step of index development because it provides a measure of the reliability of index scores. To gapfill for an economic variable that is used to calculate the status of a goal, we could use per capita GDP data for a similar region, or use the average values of UN geopolitical regions depending on what type of economic data were needed in this scenario.

<br>
<br>

### Goal status and trend
<br>

7. Read the methods section for the Lasting Special Places subgoal: https://raw.githack.com/OHI-Science/ohi-global/published/documents/methods/Supplement.html#692_lasting_special_places_(subgoal_of_sense_of_place)

The information in this section describes how status and trend are calculated for this goal, it also includes the data used to calculate the pressure and resilience dimensions.

QUESTION: What is the reference point for this subgoal?

ANSWER: The reference point for this subgoal is 30% of coastal waters and coastline area protected.

Explore the links to the pressures and resilience data layers.

Follow this link to the functions.R file in ohi-global: https://github.com/OHI-Science/ohi-global/blob/draft/eez/conf/functions.R

Find the Lasting Special Places function.  See if you can reconcile the model described in the Methods with the code. (NOTE: Just aim for a large picture overview...at this point you do not need to understand every step….or even most of this)

<br>
<br>

8. The trend for the Tourism and Recreation goal for the United States is -0.15.  Describe what this means.

ANSWER: A trend of -0.15 means we expect the United States' Tourism and Recreation goal status to decrease by 15% over the next 5 years.

<br>
<br>

9. We are going to walk through a trend calculation.  If R is installed on your computer, follow along.

Status data for a region's Tourism and Recreation goal:

Year  | Status
------ | ----------
2010  | 72
2011  | 71
2012  | 72
2013  | 73
2014  | 77
2015  | 80
2016  | 82

*STEP 1* Estimate the average change per year using a linear regression model

![](figures/trend_lm.jpg)

The 0.027 value is the slope estimate, which is the average change in status per year estimated by the linear model.


*STEP 2* Obtain proportional change by dividing the slope estimate by the earliest status value used in the linear model:

`0.027/0.72 = 0.0375`

There has been nearly a 4% increase in status per year.

*STEP 3* The goal is to predict the change in 5 years, so we multiply the yearly proportional change by 5:

`0.0375 * 5 = 0.1875`

Status is predicted to increase about 19% in 5 years.

In 2021, status is predicted to be (ignoring pressure/resilience dimensions):
82 * (1 + 0.1875) = 97

QUESTION: What assumptions are we making by using this formulation of trend to calculate the likely future status?

ANSWER: By using a linear regression model to calculate the average change of past trends per year to estimate likely future status, we are making the following assumptions:
- We're assuming the status data has a simple linear trend, which may not always be the case due to a variety of variables (e.g. altered pressures and resilience responses, nonlinear patterns in system response, stochastic environmental and biological variability, and simple bounding conditions). 
- We're assuming the same trend value is reflecting the same processes; but this is not always the case (e.g. declines due to unsustainable harvest of a resource can look identical to declines due to restrictions placed on resources users to allow the resource to recover).
- We are also assuming a time frame of the past 5 years (2012-2016) is long enough to determine true trends or the causes of those trends.

QUESTION: Can you think of any scenarios when we would not use 5 years of data to estimate trend?

ANSWER: If we didn't yet have 5 years of data for a country that was recently added to the OHI assessment we would have to estimate trend based on however many years of data we had.

<br>
<br>

### Goal pressure and resilience
<br>

10. The pressure dimension plays a relatively small role in goal scores (see figure 4.1), but it takes a lot of effort to prepare the data!

The final pressure dimension is calculated for each region and goal using a function from the ohicore package.  The function requires several pieces of information:

a. A data layer for each pressure layer describing the magnitude of the pressure on a scale of 0-1.  For example, here is the sea surface temperature pressure layer (low pressures are good and high pressures are bad): https://github.com/OHI-Science/ohiprep_v2019/blob/gh-pages/globalprep/prs_sst/v2016/output/sst_updated.csv

b. Classifying the pressure category for each data layer. The pressure dimension is based on two types of pressures: Ecological and Social (Figure 4.2).  The ecological pressures are broken into 5 categories (pollution, alien species, habitat destruction, fishing, and climate change).  Each pressure data layer is assigned to a category in this file: https://github.com/OHI-Science/ohi-global/blob/draft/eez/conf/pressure_categories.csv

QUESTION: How many climate change pressures are there? 

ANSWER: There are four climate change pressures: 
1. Sea surface temperature (pressure due to increasing extreme sea surface temperature events)
2. Ocean acidification (pressure due to increasing ocean acidification, scaled using biological thresholds)
3. UV radiation (pressure due to increasing frequency of UV anomalies)
4. Sea level rise (pressure due to rising mean sea level)

c. Pressure x goal weighting. Pressures have little or no effect on some goals, but huge effects on others.  The relationship between the goals and the pressure variables is described here: https://github.com/OHI-Science/ohi-global/blob/draft/eez/conf/pressures_matrix.csv

QUESTION: Which pressure layers affect the FIS  subgoal?  How many ecological pressure layers are there?  How many social layers are there?  Which is more important: Ecological or Social pressures? 

ANSWER: The po_chemicals, po_nutrients, sp_alien, sp_genetic, hd_subtidal_sb, hd_subtidal_hb, hd_intertidal, fp_com_hb, fp_com_lb, fp_art_lb, fp_art_hb, ss_wgi, and ss_spi pressure layers affect the FIS subgoal. There are 20 ecological pressure layers and 2 social layers. Ecological and social pressures are equally important.

QUESTION: Some goals, like Coastal Protection, have multiple “elements”.  Why? 

ANSWER: The Coastal Protection goal includes global data for multiple habitats that provide protection to coastal areas (mangroves, coral reefs, seagrasses, salt marshes, and coastal sea ice). The pressures are different for each habitat, so they need to be assessed as their own elements.

NOTE: It is convention to add a superscript to the pressure name that describes its category:
* po=pollution
* hd=habitat destruction
* sp=alien species
* fp=fishing pressure
* cc=climate change

<br>
<br>

11.  Similar to the pressures dimension, resilience plays a relatively small role in goal scores (see figure 4.1) but still takes a lot of effort.

The final resilience dimension is calculated for each region and goal using a function from the ohicore package.  The function requires several pieces of information:

a. A data layer for each resilience layer describing the magnitude of the resilience on a scale of 0-1. For example, here is the Social Progress Index layer (low resilience is bad and high resilience is good): https://github.com/OHI-Science/ohiprep_v2019/blob/gh-pages/globalprep/prs_res_spi/v2017/output/spi_res.csv

b. The resilience dimension includes two major categories: Ecological and Social (Figure 4.3). Ecological resilience has two subcategories: Ecosystem and Regulatory.  Regulatory is comprised of the same 5 subcomponents as the Ecological *pressures*: pollution, alien species, habitat destruction, fishing, and climate change.  There is also a “goal” specific subcomponent.   Each resilience data layer is assigned to a category in this file: https://github.com/OHI-Science/ohi-global/blob/draft/eez/conf/resilience_categories.csv

c. The relationship between goals and resilience is described here: https://github.com/OHI-Science/ohi-global/blob/draft/eez/conf/resilience_matrix.csv
<br>
<br>

### Data layers
<br>

12. Explore table 7.0.1 and describe where the links take you.

ANSWER: Table 6.1 gives a brief overview of all the data layers used to calculate the global OHI assessment. The "Layer" column provides links to a full description of the data layer. The "Description" column provides links to the data preparation scripts (when available).
Table 6.2 gives a brief overview of the data sources used to create the data layers described in Table 6.1. 

<br>
<br>

